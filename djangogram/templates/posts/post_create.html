{% extends 'posts/base.html' %}
this is post create html.

{% block post %}

<div class="box">
    <h2>새 글 작성하기</h2>
    {% load widget_tweaks %}
    <!-- enctype 추가하여 데이터형식을 입력한다고 알려줌 -->
    <form action=""  method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="text">
             <!--<input type="file" name="myfile" id="image" accept="image/*" onchange="setThumbnail(event);" multiple/>
            
            <button class="browse-btn">사진 업로드</button>

            <div id="image_container">
                <img id="img"/>
            </div>-->

            {{ form.image }}

            <div class="img_container" style="display: flex; align-items: center;">
                {% if widget.value %}
                    <img src="{{ widget.value.url }}" style="width: 100px; height: 100px;">
                {% endif %}

                <img id="preview_{{ widget.attrs.id }}" style="width: 100px; height: 100px; display: none;">

                {% include "admin/widgets/clearable_file_input.html" %}
            
            </div>
            
            {{ form.text }}
        </div>
        <input type="submit" value="Upload" class="btn">
    </form>
    
</div>
<script>
    $(function(){
        $('#{{ widget.attrs.id }}').change(function(){
            if(this.files[0]){
                var reader = new FileReader();
                reader.readAsDataURL(this.files[0]);
                reader.onload = function(e){
                    $('#preview_{{ widget.attrs.id }}').attr('src', e.target.result).show();
                };
            }
        })
    })
</script>
{% endblock %}